"use strict";var WPFormsSaveResume=window.WPFormsSaveResume||function(o,r,s){var a,i,n,t,m,d={init:function(){s(o).on("click",".wpforms-save-resume-button",d.showSaveResume),s(o).on("click",".wpforms-save-resume-disclaimer-back",d.goBack),s(o).on("click",".wpforms-save-resume-disclaimer-continue",d.showConfirmation),s(o).on("click",".wpforms-save-resume-shortcode-copy",d.copyShortcodeToClipboard),s(o).on("change",".wpforms-field-email input[type=email]",d.validateEmail)},showSaveResume:function(e){a=s(e.target).closest("form.wpforms-form"),i=a.parent().parent(),t=a.find(".wpforms-submit-container").is(":visible"),d.scrollToTop(a.offset().top-75,750),1<=i.find(".wpforms-save-resume-disclaimer").length?d.showDisclaimer(e):d.showConfirmation(e)},prepareData:function(e){n=new FormData(e.get(0)),m=e.data("formid"),n.append("action","wpforms_save_resume"),n.append("page_url",r.location.href),e.data("token")&&0===s(".wpforms-token",e).length&&n.append("wpforms[token]",e.data("token"))},showDisclaimer:function(e){e.preventDefault(),d.prepareData(a),a.find(".wpforms-field-container, .wpforms-submit-container, .wpforms-recaptcha-container, .wpforms-page-indicator, .wpforms-save-resume-expired-message ").hide(),d.hideExpiredMessage(),i.find(".wpforms-save-resume-disclaimer").detach().insertAfter(a).show()},showConfirmation:function(e){e.preventDefault(),i.find(".wpforms-save-resume-disclaimer").hide(),d.prepareData(a),a.find(".wpforms-field-container, .wpforms-submit-container, .wpforms-recaptcha-container, .wpforms-page-indicator ").hide(),d.hideExpiredMessage(),i.find(".wpforms-save-resume-confirmation").detach().insertAfter(a).show(),d.sendData(e)},sendData:function(){var e;n&&m&&(d.debug("Sending"),e={type:"post",dataType:"json",url:wpforms_save_resume.ajaxurl,data:n,cache:!1,contentType:!1,processData:!1},s.ajax(e).done(function(e){!1!==e.success&&0<e.data.hash.length&&(d.debug("Sent"),i.find(".wpforms-save-resume-entry-id").val(e.data.entry_id),i.find(".wpforms-save-resume-shortcode").val(e.data.hash))}),n=new FormData)},goBack:function(e){e.preventDefault();e=a.find(".wpforms-submit-container");i.find(".wpforms-save-resume-disclaimer").hide(),d.hideExpiredMessage(),!1!==t&&e.show(),a.find(".wpforms-field-container, .wpforms-recaptcha-container, .wpforms-page-indicator").show()},copyShortcodeToClipboard:function(){var e=i.find(".wpforms-save-resume-shortcode"),a=i.find(".wpforms-save-resume-shortcode-copy"),s=(e.prop("disabled",!1).select().prop("disabled",!0),o.execCommand("copy"),a.find("i"));s.removeClass("fa-files-o").addClass("fa-check"),r.setTimeout(function(){s.removeClass("fa-check").addClass("fa-files-o")},2500),d.debug("Copied")},validateEmail:function(e){e.preventDefault(),s(a).validate({errorClass:"wpforms-error",validClass:"wpforms-valid",rules:{email:{required:!0,email:!0}},messages:{email:wpforms_settings.val_email},submitHandler:function(e){e.submit()}})},hideExpiredMessage:function(){const e=i.find(".wpforms-save-resume-expired-message");0<e.length&&e.hide()},scrollToTop:function(e,a){a=a||1e3,s("html, body").animate({scrollTop:parseInt(e,10)},{duration:a})},debug:function(e){r.location.hash&&"#wpformsfadebug"===r.location.hash&&console.log("WPForms S&R: "+e)}};return d}(document,window,jQuery);WPFormsSaveResume.init();